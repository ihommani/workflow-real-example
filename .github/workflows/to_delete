# name: Test cloud run deployment
# run-name: Test cloud run deployment

# on:
#     push: 
#       branches:
#         - main


# jobs:

#     get_docker_files:
#       runs-on: ubuntu-22.04
#       outputs:
#         docker_files: ${{ steps.list_docker_file_path.outputs.docker_files }}
#       steps:
#         - uses: actions/checkout@v4

#         - name: list_docker_file_path
#           id: list_docker_file_path
#           uses: ./.github/actions/get_docker_files


#     cloud_run_deployment:
#       needs: get_docker_files
#       uses: ./.github/workflows/_cloudrun_deployment.yaml
#       strategy:
#           matrix:
#             docker_file_path: ${{ fromJson(needs.get_docker_files.outputs.docker_files) }}
#       with:
#           workload_identity_provider: projects/684160996295/locations/global/workloadIdentityPools/github-ihommani/providers/workflow-real-example-provider
#           service_account_to_impersonate: workflow-real-example-gh@gde-ihommani.iam.gserviceaccount.com
#           cloud_region: europe-west1
#           project_id: gde-ihommani
#           repository_id: to-delete
#           tag: latest
#           docker_file_path: ${{ matrix.docker_file_path }}
#           allow_unauthenticated: true
#           no_traffic: true
#           environment: integration
